import{c as N,a as b,b as I,d as w,u as L,r as y,o as O,e as _,f as v,w as l,g as c,h as u,N as P,i as $,j as x,k,l as R,m as F,n as U,p as j,q as A,s as V,t as z,v as T,x as G,y as J,z as q,A as H}from"./vendor.b84f29da.js";const Q=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?a.credentials="include":e.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(e){if(e.ep)return;e.ep=!0;const a=t(e);fetch(e.href,a)}};Q();async function M(p){const s=N(),t=await b.getBlockAttr(s,"custom-data");if(t&&t.value!="")try{const o=I.exports.AES.decrypt(t.value,p).toString(I.exports.enc.Utf8),e=JSON.parse(o);return e.type=="secret-block"?{success:!0,content:e.content}:{success:!1}}catch(o){return{success:!1}}else return{success:!1,isFirst:!0}}const D=async(p,s)=>{const t=N(),o={type:"secret-block",content:p},e=I.exports.AES.encrypt(JSON.stringify(o),s).toString();await b.setBlockAttrs({id:t,attrs:{"custom-data":e}})},W=F("\u89E3\u9501"),X=w({props:{unlock:null,lock:null},setup(p){const s=p,t=L(),o=y(""),e=async()=>{const n=await M(o.value);n.success?s.unlock(o.value):n.isFirst?o.value===""?t.error("\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A\uFF01"):(await D("",o.value),s.unlock(o.value)):t.error("\u5BC6\u7801\u9519\u8BEF\uFF01")},a=n=>{o.value=n},i=n=>{n.key==="Enter"&&e()},g=y(!1);return O(async()=>{const n=N(),f=await b.getBlockAttr(n,"custom-data");f&&f.value!=""||(g.value=!0)}),(n,f)=>(_(),v(u(R),{"x-gap":"12",cols:"1 400:4",style:{margin:"auto",paddingLeft:"25px"}},{default:l(()=>[c(u(x),{span:"3"},{default:l(()=>[c(u(P),{"item-style":{margin:"10px",width:"100%"}},{default:l(()=>[c(u($),{"on-update:value":a,placeholder:g.value?"\u8BF7\u8BBE\u7F6E\u521D\u59CB\u5BC6\u94A5":"\u8BF7\u8F93\u5165\u5BC6\u94A5",onKeyup:i,"passively-activated":"",round:"",type:"password"},null,8,["placeholder"])]),_:1})]),_:1}),c(u(x),{span:"1"},{default:l(()=>[c(u(P),{justify:"space-around","item-style":{margin:"10px"}},{default:l(()=>[c(u(k),{onClick:e,type:"primary",ghost:""},{default:l(()=>[W]),_:1})]),_:1})]),_:1})]),_:1}))}}),Y={style:{position:"relative",display:"flex",flex:"1"}},Z=F("\u5BC6"),ee=F("\xB7\xB7\xB7"),te=w({props:{psd:null,lock:null,changePassword:null},setup(p){const s=p,t=y(""),o=U.exports.debounce(()=>D(t.value,s.psd),200),e=U.exports.throttle(()=>window.sessionStorage.setItem("sy-secret-password-time",new Date().toUTCString()),1e3),a=y(null),i=y(!1),g=()=>{const d=a.value.$refs.textareaElRef;d.scrollHeight>d.clientHeight?i.value=!0:i.value=!1},n=d=>{t.value=d,e(),o(),g()},f=async()=>{const d=await M(s.psd);d.success?t.value=d.content:s.lock(),g()};O(()=>f());const h=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9","_","-","$","%","&","@","+","!"],S=()=>{const d=14;let B="",C=h.length;for(let E=0;E<d;E++){let K=Math.floor(Math.random()*C);B+=h[K]}n(B)},r=async d=>{d==="lock-now"?(await D(t.value,s.psd),s.lock()):d==="change-password"&&s.changePassword(t.value)},m=y([{label:"\u7ACB\u5373\u9501\u5B9A",key:"lock-now"},{label:"\u4FEE\u6539\u5BC6\u7801",key:"change-password"}]);return(d,B)=>(_(),j("div",Y,[c(u($),{ref:(C,E)=>{E.inputRef=C,a.value=C},type:"textarea","on-update:value":n,value:t.value,placeholder:"\u79D8\u5BC6\u85CF\u5728\u8FD9~",style:{display:"flex",flex:"1","--padding-right":"0px"}},null,8,["value"]),t.value===""?(_(),v(u(k),{key:0,circle:"",style:{position:"absolute",right:"5px",bottom:"5px"},onClick:S},{default:l(()=>[Z]),_:1})):A("",!0),c(u(z),{trigger:"click",onSelect:r,options:m.value,placement:"bottom-end"},{default:l(()=>[c(u(k),{circle:"",style:V({position:"absolute",right:i.value?"20px":"5px",top:"5px",backgroundColor:"white"}),size:"small"},{default:l(()=>[ee]),_:1},8,["style"])]),_:1},8,["options"])]))}}),se={style:{marginLeft:"10px",marginRight:"10px"}},oe=T("div",{style:{marginTop:"10px",marginLeft:"20px",marginRight:"20px"}},"\u6CE8\u610F\uFF1A\u4FEE\u6539\u5BC6\u7801\u53EA\u4F1A\u4FEE\u6539\u5F53\u524D\u5757\u7684\u5BC6\u7801\uFF0C\u4E0D\u4F1A\u5F71\u54CD\u5176\u4ED6\u5757\uFF01",-1),ae=F("\u4FEE\u6539"),ne=F("\u53D6\u6D88"),ue=w({props:{unlock:null,psd:null,content:null},setup(p){const s=p,t=L(),o=y(""),e=async()=>{if(o.value===""){t.error("\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A\uFF01");return}await D(s.content,o.value),s.unlock(o.value)},a=()=>{s.unlock(s.psd)},i=n=>{o.value=n},g=n=>{n.key==="Enter"&&e()};return(n,f)=>(_(),v(u(R),{"x-gap":"12",cols:"2",style:{margin:"auto"}},{default:l(()=>[c(u(x),{span:"2"},{default:l(()=>[T("div",se,[c(u($),{value:o.value,"on-update:value":i,placeholder:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801",onKeyup:g},null,8,["value"])])]),_:1}),c(u(x),{span:"2"},{default:l(()=>[oe]),_:1}),c(u(x),{span:"2"},{default:l(()=>[c(u(P),{justify:"space-around",style:{marginTop:"10px"}},{default:l(()=>[c(u(k),{onClick:e,ghost:"",type:"primary"},{default:l(()=>[ae]),_:1}),c(u(k),{onClick:a,ghost:"",type:"error"},{default:l(()=>[ne]),_:1})]),_:1})]),_:1})]),_:1}))}});const re={style:{display:"flex",flex:"1",padding:"5px"}},le=w({setup(p){const s=L(),t=y(""),o=async r=>{if(r===i.value)return;const m=await M(r);m.success?(n.value="secret-content",t.value=r,i.value=""):m.isFirst||(s.error("\u5BC6\u7801\u9519\u8BEF"),i.value=r)},e=r=>{o(r),window.sessionStorage.setItem("sy-secret-password",r),window.sessionStorage.setItem("sy-secret-password-time",new Date().toUTCString())},a=()=>{n.value="password-input",t.value="",window.sessionStorage.removeItem("sy-secret-password"),window.sessionStorage.removeItem("sy-secret-password-time")},i=y(""),g=setInterval(()=>{const r=window.sessionStorage.getItem("sy-secret-password"),m=window.sessionStorage.getItem("sy-secret-password-time");if(m!=null&&m!=""&&r!=""&&r!=null){const d=new Date(m);new Date().getTime()-d.getTime()>1e3*60*10?a():f("password-input")&&o(r)}else a()},500);G(()=>{clearInterval(g)});const n=y("password-input"),f=r=>n.value===r,h=y(""),S=r=>{n.value="change-password",h.value=r};return(r,m)=>(_(),v(u(J),{embedded:"","content-style":{height:"100vh",display:"flex"}},{default:l(()=>[T("div",re,[f("password-input")?(_(),v(X,{key:0,unlock:e,lock:a})):A("",!0),f("secret-content")?(_(),v(te,{key:1,psd:t.value,lock:a,"change-password":S},null,8,["psd"])):A("",!0),f("change-password")?(_(),v(ue,{key:2,unlock:e,psd:t.value,content:h.value},null,8,["psd","content"])):A("",!0)])]),_:1}))}}),ce=w({setup(p){return(s,t)=>(_(),v(u(q),null,{default:l(()=>[c(le)]),_:1}))}});H(ce).mount("#app");
//# sourceMappingURL=index.6df86ad2.js.map
